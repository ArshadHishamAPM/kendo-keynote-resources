/*
* Kendo UI Beta v2013.2.626 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.dropdownlist.min","./kendo.editable.min","./kendo.multiselect.min","./kendo.window.min","./kendo.datepicker.min","./kendo.scheduler.recurrence.min","./kendo.scheduler.view.min","./kendo.scheduler.dayview.min","./kendo.scheduler.agendaview.min","./kendo.scheduler.monthview.min"],function(){!function(e){function t(e,t){var a,i=t.model.fields[t.field].validation;i&&(a=i.dateCompare,a&&D(a)&&a.message&&(e[f.attr("dateCompare-msg")]=a.message))}function a(e,t){return function(a){return a=e(a),n(a,"apply",t),a||[]}}function i(e,t){return function(a){return a&&("[object Array]"===x.call(a)||a instanceof f.data.ObservableArray||(a=[a])),n(a,"remove",t,!0),a=e(a),a||[]}}function n(e,t,a,i){var n,r,d;for(e=e||[],r=0,d=e.length;d>r;r++)n=e[r],(n.startTimezone||n.endTimezone||a)&&(n.start=f.timezone[t](n.start,n.startTimezone||n.endTimezone||a),n.end=f.timezone[t](n.end,n.endTimezone||n.startTimezone||a)),i&&delete n.uid;return e}function r(e,t){for(var a,i=e.length,n=0;i>n;n++)if(a=e[n],a.uid===t)return a}function d(e){var t,a,i,n,r;return e.filter("[name=end]").length&&(t=e.closest(".k-scheduler-edit-form"),a=t.find("[name=start]:visible"),i=t.find("[name=end]:visible"),i.length&&a.length&&(n=f.widgetInstance(a,f.ui),r=f.widgetInstance(i,f.ui),n&&r))?n.value()<=r.value():!0}function o(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,e}function s(e){var t,a,i=[];for(t=0,a=e.length;a>t;t++)i.push(e[t].toJSON());return i}function l(t){return function(a){e(f.format('<select data-{0}bind="value: {1}">',f.ns,t.field)).appendTo(a).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,optionLabel:"None",template:f.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}function c(t){return function(a){e(f.format('<select data-{0}bind="value: {1}">',f.ns,t.field)).appendTo(a).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource,valuePrimitive:t.valuePrimitive,itemTemplate:f.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),tagTemplate:f.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField)})}}var u,v,p,f=window.kendo,h=f.date,m=h.getDate,g=f.recurrence,w=f.ui,k=w.Widget,_="string",b=w.Popup,y=w.Calendar,D=e.isPlainObject,E=e.extend,S=e.proxy,x=Object.prototype.toString,T=e.isArray,z=".kendoScheduler",C="click",V="change",H="cancel",F="remove",N="save",I="add",R="edit",A=m(new Date),B="yyyyMMddTHHmmssZ",M="Are you sure you want to delete this event?",P="Do you want to delete only this event occurrence or the whole series?",O="Do you want to edit only this event occurrence or the whole series?",W='<a class="k-button #=className#" #=attr# href="\\#">#=text#</a>',q=f.template('<div class="k-floatwrap k-header k-scheduler-toolbar"><ul class="k-reset k-header k-toolbar k-scheduler-navigation"><li class="k-state-default k-nav-today"><a href="\\#" class="k-link">${messages.today}</a></li><li class="k-state-default k-nav-prev"><a href="\\#" class="k-link"><span class="k-icon k-i-arrow-w"></span></a></li><li class="k-state-default k-nav-next"><a href="\\#" class="k-link"><span class="k-icon k-i-arrow-e"></span></a></li><li class="k-state-default k-nav-current"><a href="\\#" class="k-link"><span class="k-icon k-i-calendar"></span><span data-#=ns#bind="text: formattedDate"></span></a></li></ul><ul class="k-reset k-header k-toolbar k-scheduler-views">#for(var view in views){#<li class="k-state-default k-view-#=view#" data-#=ns#name="#=view#"><a href="\\#" class="k-link">${views[view].title}</a></li>#}#</ul></div>'),J=function(a,i){var n={name:i.field};t(n,i),e('<input type="text" required '+f.attr("type")+'="date"'+" "+f.attr("role")+'="datetimepicker" '+f.attr("bind")+'="value:'+i.field+',invisible:isAllDay" />').attr(n).appendTo(a),e('<input type="text" required '+f.attr("type")+'="date"'+" "+f.attr("role")+'="datepicker" '+f.attr("bind")+'="value:'+i.field+',visible:isAllDay" />').attr(n).appendTo(a),e("<span "+f.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(a)},U=function(t,a){e("<div "+f.attr("bind")+'="value:'+a.field+'" />').attr({name:a.field}).appendTo(t).kendoRecurrenceEditor({start:a.model.start,timezone:a.timezone})},j=f.Class.extend({init:function(t,n){var r=t.timezone;this.reader=n,n.model&&(this.model=n.model),this.timezone=r,this.data=a(e.proxy(this.data,this),r),this.serialize=i(e.proxy(this.serialize,this),r)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}}),L=f.data.Model.define({init:function(e){var t=this;f.data.Model.fn.init.call(t,e)},toJSON:function(){var e=f.data.Model.fn.toJSON.call(this);return e.uid=this.uid,e},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0}},end:{type:"date",validation:{required:!0,dateCompare:{value:d,message:"End date should be greater than or equal to the start date"}}},recurrenceRule:{defaultValue:"",type:"string"},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),Q=f.data.DataSource.extend({init:function(e){f.data.DataSource.fn.init.call(this,E(!0,{},{schema:{modelBase:L,model:L}},e)),this.reader=new j(this.options.schema,this.reader)}});Q.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},a=t.data;if(t.data=a,!(t instanceof Q)&&t instanceof f.data.DataSource)throw Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof Q?t:new Q(t)},E(!0,f.data,{SchedulerDataSource:Q,SchedulerDataReader:j,SchedulerEvent:L}),u={update:{text:"Save",className:"k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"}},v=k.extend({init:function(t,a){var i=this;k.fn.init.call(i,t,a),i.options.views&&i.options.views.length||(i.options.views=["day","week"]),i.resources=[],i._initModel(),i._wrapper(),i._views(),i._toolbar(),i._dataSource(),i._resources(),i._resizeHandler=S(i._resize,i),i.wrapper.on("mousedown"+z+" selectstart"+z,function(e){e.preventDefault()}),e(window).on("resize"+z,i._resizeHandler)},options:{name:"Scheduler",date:A,editable:!0,autoBind:!0,timezone:"",messages:{today:"Today",save:"Save",cancel:"Cancel",destroy:"Delete"},height:null,width:null,resources:[],views:[]},events:[F,R,H,N,"dataBinding","dataBound"],destroy:function(){var t,a=this;k.fn.destroy.call(a),a.dataSource&&a.dataSource.unbind(V,a._refreshHandler),a.calendar&&(a.calendar.destroy(),a.popup.destroy()),a.view()&&a.view().destroy(),a._destroyEditable(),t=a.element.add(a.wrapper).add(a.toolbar).add(a.popup),t.off(z),e(window).off("resize"+z,a._resizeHandler),f.destroy(a.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.children(".k-event, .k-task")},_modelForContainer:function(t){t=e(t).closest("["+f.attr("uid")+"]");var a=t.attr(f.attr("uid"));return this.dataSource.getByUid(a)},_showMessage:function(t,a){var i,n,r=this,d=f.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t),o=this.options.messages,s=o.destroy,l=o.cancel;d+='<div class="k-edit-buttons k-state-default">',d+=r._createButton({name:"destroy",text:s,attr:i})+r._createButton({name:"canceledit",text:l,attr:i}),d+="</div></div></div>",n=e(d).appendTo(this.wrapper).eq(0).on("click",".k-button",function(t){t.preventDefault(),e(this).hasClass("k-grid-delete")?a():e(this).hasClass("k-scheduler-cancel")&&a(!0),n.close()}).kendoWindow({modal:!0,resizable:!1,draggable:!0,title:"Delete Event",visible:!1}).data("kendoWindow"),n.center().open()},_confirmation:function(e){var t=this,a=t.options.editable,i=a===!0||typeof a===_?M:a.confirmation;i!==!1&&null!=i?t._showMessage(i,e):e()},addEvent:function(e){var t,a;(this.editable&&this.editable.end()||!this.editable)&&(this.cancelEvent(),t=this.dataSource,a=t._createNewModel(),a instanceof f.data.Model?a.accept(e):a=E({title:""},a,e),a=this.dataSource.add(a),a&&this.editEvent(a.uid))},saveEvent:function(){var e=this,t=e._editContainer,a=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger(N,{container:t,model:a})&&e.dataSource.sync()},cancelEvent:function(){var e,t=this,a=t._editContainer;a&&(e=t._modelForContainer(a),t._removeExceptionDate(e),t.dataSource.cancelChanges(e),t._destroyEditable())},editEvent:function(e){var t=this,a="string"==typeof e?t.dataSource.getByUid(e):e;t.cancelEvent(),!a||a.recurrenceRule||a.id&&a.recurrenceId?t._editRecurringDialog(a,e):t._editEvent(a)},_editEvent:function(e){var t,a=this;a._createPopupEditor(e),t=a._editContainer,t.on(C+z,"a.k-scheduler-cancel",function(i){i.preventDefault(),i.stopPropagation(),a.trigger(H,{container:t,event:e})||a.cancelEvent()}),t.on(C+z,"a.k-scheduler-update",function(e){e.preventDefault(),e.stopPropagation(),a.saveEvent()})},_createButton:function(e){var t=e.template||W,a=typeof e===_?e:e.name||e.text,i={className:"k-scheduler-"+(a||"").replace(/\s/g,""),text:a,attr:""};if(!(a||D(e)&&e.template))throw Error("Custom commands should have name specified");return D(e)?(e.className&&(e.className+=" "+i.className),"edit"===a&&D(e.text)&&(e=E(!0,{},e),e.text=e.text.edit),i=E(!0,i,u[a],e)):i=E(!0,i,u[a]),f.template(t)(i)},_createPopupEditor:function(t){var a,i,n,r,d,o,s,u,v,p=this,h=p.options.editable,m="<div "+f.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',g=h.template,w=p.options.messages,k=w.save,b=w.cancel,y=[{field:"title",title:"Title"},{field:"start",title:"Start",editor:J},{field:"end",title:"End",editor:J},{field:"isAllDay",title:"All day event"}],S=D(h)?h.window:{},x=E({},f.Template,p.options.templateSettings),T=[],z=x.paramName,C=t.startTime,V=t.endTime;if(g)typeof g===_&&(g=window.unescape(g)),m+=f.template(g,x)(t);else{t.recurrenceId||(i=t.startTimezone||t.endTimezone||this.dataSource.reader.timezone,y.push({field:"recurrenceRule",title:"Repeat",editor:U,timezone:i})),"description"in t&&y.push({field:"description",title:"Description",editor:'<textarea name="description" class="k-textbox"/>'});for(n=0;n<p.resources.length;n++)r=p.resources[n],y.push({field:r.field,title:r.title,editor:r.multiple?c(r):l(r)});for(d=0,o=y.length;o>d;d++)s=y[d],m+='<div class="k-edit-label"><label for="'+s.field+'">'+(s.title||s.field||"")+"</label></div>",!t.editable||t.editable(s.field)?(T.push(s),m+="<div "+f.attr("container-for")+'="'+s.field+'" class="k-edit-field"></div>'):(u="#:",s.field?(s=f.expr(s.field,z),u+=s+"==null?'':"+s):u+="''",u+="#",u=f.template(u,x),m+='<div class="k-edit-field">'+u(t)+"</div>")}m+='<div class="k-edit-buttons k-state-default">',m+=p._createButton({name:"update",text:k,attr:a})+p._createButton({name:"canceledit",text:b,attr:a}),m+="</div></div></div>",v=p._editContainer=e(m).appendTo(p.wrapper).eq(0).kendoWindow(E({modal:!0,resizable:!1,draggable:!0,title:"Event",visible:!1,close:function(e){if(e.userTriggered){if(p.trigger(H,{container:v,event:t}))return e.preventDefault(),undefined;t.startTime=C,t.endTime=V,p.cancelEvent()}}},S)),delete t.startTime,delete t.endTime,p.editable=p._editContainer.kendoEditable({fields:T,model:t,clearContainer:!1,validateOnBlur:!0}).data("kendoEditable"),v.data("kendoWindow").center().open(),p.trigger(R,{container:v,event:t})},_editRecurringDialog:function(t,a){var i,n,d=this,o=e('<div class="k-popup-edit-form k-scheduler-dialog"><div class="k-edit-form-container"><p class="k-popup-message">'+O+"</p>"+'<div class="k-edit-buttons k-state-default"><button class="k-button">Edit current occurrence</button><button class="k-button">Edit the series</button></div>'+"</div></div>"),s=o.find("button");(t||(t=r(d._data,a)))&&t&&(d._recurringDialog=o.appendTo(d.wrapper).kendoWindow({modal:!0,resizable:!1,draggable:!0,title:"Edit Recurring Item",visible:!1,deactivate:function(){d._recurringDialog.destroy()}}).data("kendoWindow"),s.eq(0).on("click",function(){d._recurringDialog.close(),t.id&&t.recurrenceId?d._editEvent(t):(t.recurrenceId||(i=t.id,n=t.idField,t.toJSON&&(t=t.toJSON()),delete t[n],delete t.recurrenceRule,delete t.id,t.uid=f.guid(),t.recurrenceId=i),d._addExceptionDate(t),d.addEvent(t))}),s.eq(1).on("click",function(){t.recurrenceId&&(t=d.dataSource.get(t.recurrenceId)),d._recurringDialog.close(),d._removeExcetionEvents(t),t.set("recurrenceException",""),d._editEvent(t)}),d._recurringDialog.center().open())},_addExceptionDate:function(e){var t=this.dataSource.get(e.recurrenceId),a=e.startTimezone||e.endTimezone||this.dataSource.reader.timezone,i=t.recurrenceException||"",n=e.start;g.isException(i,n,a)||(n=f.timezone.convert(n,a||n.getTimezoneOffset(),"Etc/UTC"),i+=f.toString(n,B)+";",t.set("recurrenceException",i))},_removeExceptionDate:function(e){var t,a,i,n=e.startTimezone||e.endTimezone||this.dataSource.reader.timezone,r=e.start;e.recurrenceId&&(t=this.dataSource.get(e.recurrenceId),r=f.timezone.convert(r,n||r.getTimezoneOffset(),"Etc/UTC"),t&&(a=f.toString(r,B)+";",i=t.recurrenceException.replace(a,""),t.set("recurrenceException",i)))},_destroyEditable:function(){var e=this,t=function(){e.editable&&(e.editable.destroy(),e.editable=null,e._editContainer=null)};e.editable&&e._editContainer.data("kendoWindow").bind("deactivate",t).close(),e._recurringDialog&&(e._recurringDialog.destroy(),e._recurringDialog=null)},removeEvent:function(e){var t="string"==typeof e?this.dataSource.getByUid(e):e,a=this;!t||t.recurrenceRule||t.id&&t.recurrenceId?a._deleteRecurringDialog(t,e):a._removeEvent(t)},_removeEvent:function(e,t){var a=this;a._confirmation(function(i){i?a._removeExceptionDate(e):a.trigger(F,{event:e})||(t&&a._removeExcetionEvents(e),a.dataSource.remove(e)&&a.dataSource.sync())})},_deleteRecurringDialog:function(t,a){var i,n,d=this,o=!t,s=e('<div class="k-popup-edit-form k-scheduler-dialog"><div class="k-edit-form-container"><p class="k-popup-message">'+P+"</p>"+'<div class="k-edit-buttons k-state-default"><button class="k-button">Delete current occurrence</button><button class="k-button">Delete the series</button></div>'+"</div></div>"),l=s.find("button");(!o||(t=r(d._data,a)))&&t&&(d._recurringDialog=s.appendTo(d.wrapper).kendoWindow({modal:!0,resizable:!1,draggable:!0,title:"Delete Recurring Item",visible:!1,deactivate:function(){d._recurringDialog.destroy(),d._recurringDialog=null}}).data("kendoWindow"),l.eq(0).on("click",function(){t.recurrenceId||(i=t.id,n=t.idField,t=t.toJSON(),delete t[n],delete t.recurrenceRule,delete t.id,t.uid=f.guid(),t.recurrenceId=i),d._recurringDialog.close(),d._addExceptionDate(t),d._removeEvent(t)}),l.eq(1).on("click",function(){t.recurrenceId&&(t=d.dataSource.get(t.recurrenceId)),d._recurringDialog.close(),d._removeEvent(t,!0)}),d._recurringDialog.center().open())},_removeExcetionEvents:function(e){for(var t,a=this.dataSource,i=a.data(),n=i.length,r=0,d=e.id;n>r;r++)t=i[r],t.recurrenceId===d&&(a.remove(t),n-=1,r-=1)},_unbindView:function(e){e.destroy()},_bindView:function(e){var t=this;t.options.editable&&(t._viewRemoveHandler&&e.unbind(F,t._viewRemoveHandler),t._viewRemoveHandler=function(e){t.removeEvent(e.uid)},e.bind(F,t._viewRemoveHandler),t._viewAddHandler&&e.unbind(I,t._viewAddHandler),t._viewAddHandler=function(e){t.addEvent(e.eventInfo)},e.bind(I,this._viewAddHandler),t._viewEditHandler&&e.unbind(R,t._viewEditHandler),t._viewEditHandler=function(e){t.editEvent(e.uid)},e.bind(R,this._viewEditHandler),t._viewNavigateHandler&&e.unbind("navigate",t._viewNavigateHandler),t._viewNavigateHandler=function(e){e.view&&(t._selectView(e.view),t.date(e.date))},e.bind("navigate",t._viewNavigateHandler))},_selectView:function(e){var t=this;e&&t.views[e]&&(t._selectedView&&t._unbindView(t._selectedView),t._selectedView=t._renderView(e),t._selectedViewName=e,t.toolbar.find(".k-scheduler-views li").removeClass("k-state-selected").end().find(".k-view-"+e).addClass("k-state-selected"))},view:function(e){var t=this;return e?(t._selectView(e),t.rebind(),undefined):t._selectedView},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),this._model.set("formattedDate",t.dateForTitle()),t},_resize:function(){this.refresh()},_initializeView:function(e){var t,a,i=this.views[e];if(i){if(t=D(i),a=i.type,typeof a===_&&(a=f.getter(i.type)(window)),!a)throw Error("There is no such view");i=new a(this.wrapper,o(E({},this.options,t?i:{},{resources:this.resources,date:this.date()})))}return i},_views:function(){var e,t,a,i,n,r,d,o,s=this.options.views;for(this.views={},d=0,o=s.length;o>d;d++)e=s[d],i=D(e),i?(r=n=e.type?e.type:e,typeof r!==_&&(n=e.title)):r=n=e,t=p[n],t&&(e.type=t.type),e=E({title:n},t,i?e:{}),n&&(this.views[n]=e,(!a||e.selected)&&(a=n));a&&(this._selectedViewName=a)},rebind:function(){this.dataSource.fetch()},_dataSource:function(){var e=this,t=e.options,a=t.dataSource;a=T(a)?{data:a}:a,!t.timezone||a instanceof Q||(a=E(!0,a,{schema:{timezone:t.timezone}})),e.dataSource&&e._refreshHandler?e.dataSource.unbind(V,e._refreshHandler):e._refreshHandler=S(e.refresh,e),e.dataSource=f.data.SchedulerDataSource.create(a).bind(V,e._refreshHandler)},_resources:function(){var t,a,i,n,r,d=this,o=d.options.resources;for(t=0;t<o.length;t++){if(a=o[t],i=a.field,n=a.dataSource,!i||!n)throw Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');d.resources.push({field:i,title:a.title||i,dataTextField:a.dataTextField||"text",dataValueField:a.dataValueField||"value",dataColorField:a.dataColorField||"color",valuePrimitive:null!=a.valuePrimitive?a.valuePrimitive:!0,multiple:a.multiple||!1,dataSource:f.data.DataSource.create(n)})}r=e.map(d.resources,function(e){return e.dataSource.fetch()}),e.when.apply(null,r).then(function(){d.options.autoBind?d.view(d._selectedViewName):d._selectView(d._selectedViewName)})},_initModel:function(){var e=this;e._model=f.observable({selectedDate:this.options.date,formattedDate:""}),e._model.bind("change",function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)})},_wrapper:function(){var e=this,t=e.options.height;e.wrapper=e.element,e.wrapper.addClass("k-widget k-scheduler k-floatwrap"),t&&e.wrapper.css("height",t)},date:function(e){return null!=e&&this._model.set("selectedDate",e),m(this._model.get("selectedDate"))},_toolbar:function(){var t=this,a=t.options,i=e(q({messages:a.messages,ns:f.ns,views:t.views}));t.wrapper.append(i),t.toolbar=i,f.bind(t.toolbar,t._model),i.on(C+z,".k-scheduler-navigation li",function(a){var i=e(this),n=new Date(t.date());if(a.preventDefault(),i.hasClass("k-nav-today"))n=new Date;else if(i.hasClass("k-nav-next"))n=t.view().nextDate();else if(i.hasClass("k-nav-prev"))n=t.view().previousDate();else if(i.hasClass("k-nav-current"))return t._showCalendar(),undefined;t.date(n)}),i.on(C+z,".k-scheduler-views li",function(a){t.view(e(this).attr(f.attr("name"))),a.preventDefault()})},_showCalendar:function(){var t=this,a=t.toolbar.find(".k-nav-current"),i=e('<div><div class="k-scheduler-calendar"/></div>');t.popup||(t.popup=new b(i,{anchor:a,activate:function(){t.calendar||(t.calendar=new y(this.element.find(".k-scheduler-calendar"),{change:function(){t.date(this.value()),t.popup.close()}})),t.calendar.value(t.date())},copyAnchorStyles:!1})),t.popup.open()},_expandEvents:function(e,t){var a=t.endDate(),i=t.endTime;return g?(a=new Date(a),i?a.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()):a.setHours(23,59,59,999),e=g.expandAll(e,t.startDate(),a,this.dataSource.reader.timezone)):e=s(e),e},_createFilter:function(e,t){var a=f.date.MS_PER_DAY,i={};return e&&t&&(i={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:new Date(t.getTime()+a-1)}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+a-1)},{field:"end",operator:"gte",value:e}]}]}),i},refresh:function(e){var t=this.view(),a=this.dataSource.view();e&&"itemchange"===e.action&&this.editable||(this.trigger("dataBinding"),this._destroyEditable(),this._data=a=this._expandEvents(a,t),a=new f.data.Query(a).filter(this._createFilter(t.startDate(),t.endDate())).toArray(),t.render(a),this.trigger("dataBound"))}}),p={day:{type:"kendo.ui.DayView",title:"Day"},week:{type:"kendo.ui.WeekView",title:"Week"},agenda:{type:"kendo.ui.AgendaView",title:"Agenda"},month:{type:"kendo.ui.MonthView",title:"Month"}},w.plugin(v)}(window.kendo.jQuery)});