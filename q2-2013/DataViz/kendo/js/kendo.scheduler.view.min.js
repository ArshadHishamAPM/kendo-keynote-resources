/*
* Kendo UI Beta v2013.2.626 (http://kendoui.com)
* Copyright 2013 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.core.min"],function(){!function(e){function t(e,t){function r(e,s){var i,l;if(s=s[t])for(i=n[e]=n[e]||[],l=0;l<s.length;l++)i.push(s[l]),r(e+1,s[l])}var n=[];return r(0,e),n}function r(t,r){return t.length?'<table class="'+e.trim("k-scheduler-table "+(r||""))+'">'+"<tr>"+t.join("</tr><tr>")+"</tr>"+"</table>":""}function n(t,n,s){var i,l=[];if(s>0)for(i=0;t>i;i++)l.push("<th></th>");return n&&l.push('<th class="k-scheduler-times-all-day">'+n.text+"</th>"),1>s?e():e('<div class="k-scheduler-times">'+r(l)+"</div>")}function s(t,n,s){var i,l,a,o,h,d,c,u,f=[];for(l=0;l<t.length;l++){for(a=t[l],o=[],h=n/a.length,i=0;i<a.length;i++)o.push('<th colspan="'+h+'" class="'+(a[i].className||"")+'">'+a[i].text+"</th>");f.push(o.join(""))}if(d=[],s){for(c=t[t.length-1],u=[],i=0;i<c.length;i++)u.push('<td class="'+(c[i].className||"")+'">&nbsp;</th>');d.push(u.join(""))}return e('<div class="k-scheduler-header k-state-default"><div class="k-scheduler-header-wrap">'+r(f)+r(d,"k-scheduler-header-all-day")+"</div>"+"</div>")}function i(t,n){var s,i,l,a,o=Array(n).join().split(","),h=[];for(i=0;i<t.length;i++)for(l=t[i],a=n/l.length,s=0;s<l.length;s++)o[a*s]+='<th class="'+l[s].className+'" rowspan="'+a+'">'+l[s].text+"</th>";for(s=0;n>s;s++)h.push(o[s]);return 1>n?e():e('<div class="k-scheduler-times">'+r(h)+"</div>")}function l(){return e('<div class="k-scheduler-content"><table class="k-scheduler-table"/></div>')}function a(e,t,r){return o(e,t,r,!0)}function o(e,t,r,n){var s,i,l,a,o;for(s=e.length-1;s>=0;s--)i=h(e[s]),l=i.start,o=i.end,a=n?t>=l&&o>=t:t>l&&o>t,(a||l>=t&&r>=o||l>=t&&r>=l)&&(t>l&&(t=l),o>r&&(r=o));return d(e,t,r)}function h(e){var t=e.length?e[0]:e,r=t.getAttribute(g.attr("start-end-idx")).split("-");return{start:+r[0],end:+r[1]}}function d(e,t,r){return e.filter(function(){var e=h(this);return e.start<t&&e.end>t||e.start>=t&&e.end<=r})}function c(e){return f(e)}function u(e){return f(e,!0)}function f(e,t){var r=[];return e.each(function(){var e,n,s,i,l=this,a=h(l);for(n=0,s=r.length;s>n;n++)if(i=t?a.start>r[n].end:a.start>=r[n].end,a.start<r[n].start||i){e=r[n],e.end<a.end&&(e.end=a.end);break}e||(e={start:a.start,end:a.end,events:[]},r.push(e)),e.events.push(l)}),r}var g=window.kendo,p=g.ui,v=p.Widget,m=".kendoSchedulerView";g.ui.SchedulerView=v.extend({init:function(e,t){v.fn.init.call(this,e,t),this._scrollbar=g.support.scrollbar()},dateForTitle:function(){return g.format(this.options.selectedDateFormat,this.startDate(),this.endDate())},eventResources:function(e){var t,r,n,s,i,l,a,o,h,d=[],c=this.options;if(!c.resources)return d;for(t=0;t<c.resources.length;t++)if(r=c.resources[t],n=r.field,s=g.getter(n)(e))for(r.multiple||(s=[s]),i=r.dataSource.view(),l=0;l<s.length;l++){for(a=null,o=s[l],r.valuePrimitive||(o=g.getter(r.dataValueField)(o)),h=0;h<i.length;h++)if(i[h].get(r.dataValueField)==o){a=i[h];break}null!=a&&d.push({text:g.getter(r.dataTextField)(a),value:o,color:g.getter(r.dataColorField)(a)})}return d},createLayout:function(r){var n,s,i,l,a,o=-1;for(r.rows||(r.rows=[]),n=0;n<r.rows.length;n++)if(r.rows[n].allDay){o=n;break}s=r.rows[o],o>=0&&r.rows.splice(o,1),i=t(r,"columns"),l=t(r,"rows"),this.table=e('<table class="k-scheduler-layout">'),a=l[l.length-1].length,this.table.append(this._topSection(i,s,a)),this.table.append(this._bottomSection(i,l,a)),this.element.append(this.table),this._scroller()},refreshLayout:function(){var e,t,r,n=this,s=n.element.find(">.k-scheduler-toolbar"),i=n.element.innerHeight(),l=this._scrollbar,a=0;s.length&&(i-=s.outerHeight()),n.datesHeader&&(a=n.datesHeader.outerHeight()),n.timesHeader&&n.timesHeader.outerHeight()>a&&(a=n.timesHeader.outerHeight()),a&&(i-=a),n.footer&&(i-=n.footer.outerHeight()),e=function(e){var t,r;return e[0].style.height?!0:(t=e.height(),e.height("auto"),r=e.height(),t!=r?(e.height(""),!0):(e.height(""),!1))},t=n.content[0],r=g.support.kineticScrollNeeded?0:l,e(n.element)&&(i>2*l?n.content.height(i):n.content.height(2*l+1),n.times.height(t.clientHeight)),t.offsetWidth-t.clientWidth>0&&(n.table.addClass("k-scrollbar-v"),n.datesHeader.css("padding-right",r-parseInt(n.datesHeader.children().css("border-right-width"),10))),(t.offsetHeight-t.clientHeight>0||t.clientHeight>n.content.children(".k-scheduler-table").height())&&n.table.addClass("k-scrollbar-h")},_topSection:function(t,r,i){this.timesHeader=n(t.length,r,i);var l=t[t.length-1].length;return this.datesHeader=s(t,l,r),e("<tr>").append(this.timesHeader.add(this.datesHeader).wrap("<td>").parent())},_bottomSection:function(t,r,n){return this.times=i(r,n),this.content=l(t[t.length-1],r[r.length-1]),e("<tr>").append(this.times.add(this.content).wrap("<td>").parent())},_scroller:function(){var e,t=this;this.content.bind("scroll"+m,function(){t.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(this.scrollLeft),t.times.scrollTop(this.scrollTop)}),e=g.touchScroller(this.content),e&&e.movable&&(this._touchScroller=e,this.content=e.scrollElement,e.movable.bind("change",function(e){t.datesHeader.find(">.k-scheduler-header-wrap").scrollLeft(-e.sender.x),t.times.scrollTop(-e.sender.y)}))},destroy:function(){var e=this;v.fn.destroy.call(this),e.table&&(g.destroy(e.table),e.table.remove())}}),e.extend(p.SchedulerView,{createColumns:c,createRows:u,rangeIndex:h,collidingEvents:o,collidingHorizontallyEvents:a})}(window.kendo.jQuery)});